<!DOCTYPE html>
<html ng-app="ConsultorioVirtual" lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Consultorio Virtual</title>
    <!-- Links -->
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />

    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="images/icono.png" />
    <link rel="stylesheet" href="./css/styles.css" />

    <script src="js/api.js"></script>
    <script defer src="js/registro.js"></script>
  </head>

  <body
    class="
      w-screen
      h-screen
      flex
      justify-center
      items-center
      md:p-10
      bg-gradient-to-tl
      from-gray-700
      via-purple-600
      to-purple-900
    "
  >
    <form
      id="regForm"
      autocomplete="off"
      class="
        justify-between
        p-5
        w-full
        h-full
        bg-white bg-opacity-90
        shadow-xl
        md:rounded-xl
        flex flex-col
        text-gray-800
        gap-5
        overflow-auto
      "
    >
      <a
        href="./"
        class="z-10 w-max -mb-10 flex justify-center items-center p-2 pr-3 bg-purple-600 rounded-md text-white"
      >
        <i class="material-icons-round">chevron_left</i>
        Atras
      </a>
      <h1 class="text-4xl mt-8 md:m-0 text-center">Formulario de Registro</h1>
      <br />
      <p class="text-md text-gray-400">Todos los campos son obligatorios.</p>
      <div class="flex gap-5 w-full">
        <input
          class="w-full border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="name"
          id="name"
          name="nombre"
          placeholder="Nombre..."
        />
      </div>

      <div class="flex flex-col md:flex-row gap-5 w-full">
        <input
          class="w-full md:w-1/4 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="date"
          id="date"
          name="nacimiento"
          placeholder="Fecha de Nacimiento..."
        />
        <select
          class="w-full md:w-1/4 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          id="gender"
          name="genero"
        >
          <option value="M">Masculino</option>
          <option value="F">Femenino</option>
          <option value="O">Otro</option>
        </select>
        <input
          class="w-full md:w-1/4 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="tel"
          id="tel"
          name="tel"
          placeholder="Telefono..."
        />
        <input
          class="w-full md:w-1/4 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="email"
          id="email"
          name="correo"
          placeholder="Email..."
        />
      </div>

      <div class="flex gap-5 w-full">
        <select
          class="w-1/3 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          id="state"
          name="estadoCivil"
        >
          <option value="Solter@">Solter@</option>
          <option value="Casad@">Casad@</option>
          <option value="Union Libre">Union Libre</option>
          <option value="Viud@">Viud@</option>
        </select>
        <input
          class="w-1/3 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="text"
          id="place"
          name="ciudad"
          placeholder="Lugar de Nacimiento..."
        />
        <input
          class="w-1/3 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="text"
          id="job"
          name="ocupacion"
          placeholder="Ocupación..."
        />
      </div>

      <div class="flex gap-5 w-full">
        <select
          class="w-full md:w-1/2 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          id="security"
          name="seguridad"
        >
          <option value="Subsidiada">Subsidiada</option>
          <option value="Contributiva">Contributiva</option>
        </select>
      </div>

      <br />
      <h3 class="text-2xl">Escolaridad</h3>

      <div class="flex flex-col md:flex-row gap-5 w-full">
        <select
          class="w-full md:w-1/2 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          id="study"
          name="estudios"
        >
          <option value="Sin Estudio">Sin Estudio</option>
          <option value="Primaria Inconclusa">Primaria Inconclusa</option>
          <option value="Primaria Completada">Primaria Completada</option>
          <option value="Secundaria Inconclusa">Secundaria Inconclusa</option>
          <option value="Secundaria Completada">Secundaria Completada</option>
          <option value="Estudiante Universitario">Estudiante Universitario</option>
          <option value="Profesional">Profesional</option>
          <option value="Posgrado">Posgrado</option>
        </select>
        <input
          class="w-full md:w-1/2 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="text"
          id="profesion"
          name="carrera"
          placeholder="Carrera o Programa Academico..."
        />
        <select
          class="w-full md:w-1/8 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          id="semester"
          name="semestre"
        >
          <option value="1">Semestre: 1</option>
          <option value="2">Semestre: 2</option>
          <option value="3">Semestre: 3</option>
          <option value="4">Semestre: 4</option>
          <option value="5">Semestre: 5</option>
          <option value="6">Semestre: 6</option>
          <option value="7">Semestre: 7</option>
          <option value="8">Semestre: 8</option>
          <option value="9">Semestre: 9</option>
          <option value="10">Semestre: 10</option>
          <option value="Practicas">Practicas</option>
          <option value="N/a">N/a</option>
        </select>
      </div>

      <div class="flex gap-5 w-full">
        <textarea
          class="w-1/2 h-32 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="text"
          id="razon"
          name="motivo"
          placeholder="Motivo de Visita..."
        ></textarea>
        <textarea
          class="w-1/2 h-32 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="text"
          id="how"
          name="text"
          placeholder="¿Como te Enteraste de la Pagina?..."
        ></textarea>
      </div>

      <div class="flex gap-5 w-full">
        <input
          autocomplete="new-password"
          class="w-1/2 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="password"
          id="pass"
          name="password"
          placeholder="Contraseña..."
        />
        <input
          class="w-1/2 border border-gray-300 rounded-md p-2 bg-opacity-75 bg-white"
          type="password"
          id="confPass"
          name="confPassword"
          placeholder="Confirmar Contraseña..."
        />
      </div>

      <br />
      <button id="registerButton" class="bg-blue-600 text-white font-medium rounded-md p-2 w-full h-14">
        Guardar Registro
      </button>
    </form>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    window.addEventListener("DOMContentLoaded", async (e) => {
      try {
          const token = window.localStorage.getItem("x-token")
            const res = await fetch(`${location.origin}/api/auth/validateToken`,
                {
                    method: 'GET',
                    headers: {
                        'x-token': token,
                        'Content-Type': 'application/json'
                    }
                });
            const { validate } = await res.json();
            if (validate) {
                window.location.replace(`${location.origin}/paginas/inicio.html`)
            }
        } catch (error) {
            //dejar pasar y entrar a login
        }
    });
    </script>
</html>
